# One of 'breaking', 'deprecation', 'new_component', 'enhancement', 'bug_fix'
change_type: breaking

# The name of the component, or a single word describing the area of concern, (e.g. tempostack, tempomonolithic, github action)
component: operator

# A brief description of the change. Surround your text with quotes ("") if it needs to start with a backtick (`).
note: Migrate operator configuration from ConfigMap to environment variables

# One or more tracking issues related to the change
issues: [1348]

# (Optional) One or more lines of additional information to render under the primary note.
# These lines will be padded with 2 spaces and then inserted directly into the document.
# Use pipe (|) for multiline entries.
subtext: |
  The default operator deployment no longer uses a ConfigMap-based configuration file.
  Configuration is now managed through environment variables.

  **To continue using a ConfigMap:** Mount your `controller_manager_config.yaml` ConfigMap and add
  the `--config=/path/to/config.yaml` flag to the operator deployment args.
  Environment variables will still take precedence over the config file.

  **To migrate to environment variables:** Use `FEATURE_GATES` for boolean flags (comma-separated,
  prefix with `-` to disable) and individual env vars for other settings.

  Example OLM Subscription override:
  ```yaml
  spec:
    config:
      env:
      - name: FEATURE_GATES
        value: "prometheusOperator,observability.metrics.createServiceMonitors,-networkPolicies"
      - name: TLS_PROFILE
        value: "Intermediate"
  ```

  Available feature gates: `openshift.route`, `openshift.servingCertsService`, `openshift.oauthProxy`,
  `httpEncryption`, `grpcEncryption`, `prometheusOperator`, `grafanaOperator`, `builtInCertManagement`,
  `observability.metrics.createServiceMonitors`, `observability.metrics.createPrometheusRules`, `networkPolicies`

  Other env vars: `DISTRIBUTION`, `TLS_PROFILE`, `OPENSHIFT_BASE_DOMAIN`, `DEFAULT_POD_SECURITY_CONTEXT` (JSON),
  `BUILT_IN_CERT_MANAGEMENT_CA_VALIDITY`, `BUILT_IN_CERT_MANAGEMENT_CA_REFRESH`,
  `BUILT_IN_CERT_MANAGEMENT_CERT_VALIDITY`, `BUILT_IN_CERT_MANAGEMENT_CERT_REFRESH`
